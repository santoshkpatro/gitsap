{% extends 'base/project.html' %}

{% block content %}
<!-- Toolbar: Branch selector -->
<div class="d-flex justify-content-between align-items-center mb-2">
    {% include 'projects/_branch_dropdown.html' %}
</div>

<!-- File list -->
<div class="list-group">
    {% for object in objects %}
    <div class="list-group-item">
        <div class="row align-items-center">
            <!-- Left: File / Folder name -->
            <div class="col-3 d-flex align-items-center gap-2 text-truncate">
                {% if object.type == "tree" %}
                <i data-lucide="folder" width="14" height="14" class="text-primary"></i>
                <a href="{% url 'project-tree' namespace=request.project.namespace branch=current_branch nodepath=object.nodepath %}"
                    class="fw-semibold text-truncate file-link">
                    {{ object.name }}
                </a>
                {% else %}
                <i data-lucide="file" width="14" height="14" class="text-secondary"></i>
                <a href="{% url 'project-blob' namespace=request.project.namespace branch=current_branch nodepath=object.nodepath %}"
                    class="fw-semibold text-truncate file-link">
                    {{ object.name }}
                </a>
                {% endif %}
            </div>

            <!-- Middle: Commit message -->
            <div class="col-6 text-truncate">
                <small class="text-muted">{{ object.last_commit.message }}</small>
            </div>

            <!-- Right: Commit time -->
            <div class="col-3 text-end text-nowrap">
                <small class="text-muted">{{ object.last_commit.time|timesince }} ago</small>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock content %}