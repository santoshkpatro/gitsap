<div class="d-flex justify-content-between align-items-center mb-2">
    <div class="dropdown">
        <button class="btn btn-sm btn-outline-primary dropdown-toggle" type="button" id="branchDropdown"
            data-bs-toggle="dropdown" aria-expanded="false">
            {{ current_branch }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="branchDropdown">
            {% for branch in branches %}
            <li>
                {% if current_nodepath %}
                <a class="dropdown-item {% if branch == current_branch %}active{% endif %}"
                    href="{% url 'project-tree' namespace=request.project.namespace branch=branch nodepath=current_nodepath %}">
                    {{ branch }}
                </a>
                {% else %}
                <a class="dropdown-item {% if branch == current_branch %}active{% endif %}"
                    href="{% url 'project-root-tree' namespace=request.project.namespace branch=branch %}">
                    {{ branch }}
                </a>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </div>
</div>


<!-- File list -->
<div class="list-group">
    {% for object in objects %}
    <div class="list-group-item">
        <div class="row align-items-center">
            <!-- Left: File / Folder name -->
            <div class="col-3 d-flex align-items-center gap-2 text-truncate">
                {% if object.type == "tree" %}
                <i class="bi bi-folder text-primary"></i>
                <a href="{% url 'project-tree' namespace=request.project.namespace branch=current_branch nodepath=object.nodepath %}"
                    hx-get="{% url 'project-tree' namespace=request.project.namespace branch=current_branch nodepath=object.nodepath %}"
                    hx-target="#nodes" hx-push-url="true" class="fw-semibold text-truncate file-link">
                    {{ object.name }}
                </a>
                {% else %}
                <i class="bi bi-file-earmark text-secondary"></i>
                <a href="{% url 'project-blob' namespace=request.project.namespace branch=current_branch nodepath=object.nodepath %}"
                    class="fw-semibold text-truncate file-link">
                    {{ object.name }}
                </a>
                {% endif %}
            </div>

            <!-- Middle: Commit message -->
            <div class="col-6 text-truncate">
                <small class="text-muted">{{ object.last_commit.message }}</small>
            </div>

            <!-- Right: Commit time -->
            <div class="col-3 text-end text-nowrap">
                <small class="text-muted">{{ object.last_commit.time|timesince }} ago</small>
            </div>
        </div>
    </div>
    {% endfor %}
</div>