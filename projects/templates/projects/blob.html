{% extends 'shared/project_base.html' %}
{% load humanize %}

{% block styles %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism.css">
<style>
    pre code {
        font-size: 13px;
        line-height: 1.5;
    }
</style>
{% endblock styles %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <!-- Left: Commit message -->
    <div class="text-muted small">
        <i class="bi bi-chat-left-text me-1"></i>
        {{ repo_object.last_commit.message|truncatechars:80 }}
    </div>

    <!-- Right: Hash + timestamp -->
    <div class="text-muted small text-end">
        <div><i class="bi bi-git me-1"></i><code>{{ repo_object.last_commit.hash|slice:":8" }}</code></div>
        <div>{{ repo_object.last_commit.timestamp|naturaltime }}</div>
    </div>
</div>

<pre class="line-numbers"><code class="language-{{ repo_object.language }}">{{ repo_object.code|escape }}</code></pre>
{% endblock content %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
{% if repo_object.language != 'plaintext' %}
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-{{ repo_object.language }}.min.js"></script>
{% endif %}
{% endblock scripts %}