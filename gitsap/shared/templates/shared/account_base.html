{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    {% block meta_description %}{% endblock %}

    <link rel="shortcut icon" href="{% static 'shared/images/favicon.ico' %}" type="image/x-icon" />
    <title>{% block title %}Gitsap{% endblock title %}</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
    <link href="{% static 'shared/css/bootstrap.css' %}" rel="stylesheet" />
    <link href="{% static 'shared/css/base.css' %}" rel="stylesheet" />
    {% block styles %}{% endblock %}
</head>

<body>
    <div class="d-flex vh-100">
        <!-- Sidebar -->
        <div class="sidebar d-flex flex-column p-3 border-end bg-white" style="width: 260px;">
            <div class="text-center mb-4">
                <img src="{{ user.profile_picture_url|default:'https://www.gravatar.com/avatar/?d=mp' }}"
                    class="rounded-circle mb-2"
                    style="width: 64px; height: 64px; object-fit: cover"
                    alt="User profile" />
                <h6 class="fw-semibold mb-0 text-truncate">{{ user.name|default:user.username }}</h6>
                <div class="text-muted small text-truncate">@{{ user.username }}</div>
            </div>

            <ul class="nav flex-column gap-1 mt-2">
                <li><a href="#" class="nav-link {% if active_tab == 'profile' %}active{% endif %}"><i data-lucide="user" class="icon"></i><span>Profile</span></a></li>
                <li><a href="#" class="nav-link {% if active_tab == 'account' %}active{% endif %}"><i data-lucide="settings" class="icon"></i><span>Account</span></a></li>
                <li><a href="#" class="nav-link {% if active_tab == 'billing' %}active{% endif %}"><i data-lucide="credit-card" class="icon"></i><span>Billing</span></a></li>
                <li><a href="#" class="nav-link {% if active_tab == 'notifications' %}active{% endif %}"><i data-lucide="bell" class="icon"></i><span>Notifications</span></a></li>
                <li><a href="#" class="nav-link {% if active_tab == 'ssh' %}active{% endif %}"><i data-lucide="key" class="icon"></i><span>SSH and GPG Keys</span></a></li>
                <li><a href="#" class="nav-link {% if active_tab == 'security' %}active{% endif %}"><i data-lucide="shield" class="icon"></i><span>Security</span></a></li>
                <li><a href="#" class="nav-link {% if active_tab == 'organizations' %}active{% endif %}"><i data-lucide="building-2" class="icon"></i><span>Organizations</span></a></li>
                <li><a href="#" class="nav-link {% if active_tab == 'connected_accounts' %}active{% endif %}"><i data-lucide="link" class="icon"></i><span>Connected Accounts</span></a></li>
                <li><a href="#" class="nav-link {% if active_tab == 'advanced' %}active{% endif %}"><i data-lucide="terminal-square" class="icon"></i><span>Advanced</span></a></li>
            </ul>

            <div class="mt-auto pt-3 border-top">
                <ul class="nav flex-column gap-1 mt-3">
                    <li><a href="#" class="nav-link"><i data-lucide="help-circle" class="icon"></i><span>Help</span></a></li>
                    <li><a href="#" class="nav-link"><i data-lucide="life-buoy" class="icon"></i><span>Support</span></a></li>
                </ul>
                <div class="why-gitsap text-center mt-3 small text-muted">
                    &copy; 2025 â€¢ <a href="#" class="text-muted text-decoration-none">Why Gitsap?</a>
                </div>
            </div>
        </div>

        <!-- Right Area -->
        <div class="flex-grow-1 d-flex flex-column">
            <!-- Topbar -->
            <!-- Topbar -->
            <div class="topbar d-flex justify-content-between align-items-center px-4 py-2 border-bottom bg-light">
                <!-- Left Links -->
                <div class="d-flex align-items-center gap-3 text-dark small fw-medium">
                    <a href="#" class="d-flex align-items-center gap-1 text-dark text-decoration-none">
                        <i data-lucide="home" style="width: 16px; height: 16px;"></i><span>Home</span>
                    </a>
                    <a href="#" class="d-flex align-items-center gap-1 text-dark text-decoration-none">
                        <i data-lucide="folder" style="width: 16px; height: 16px;"></i><span>Projects</span>
                    </a>
                    <a href="#" class="d-flex align-items-center gap-1 text-dark text-decoration-none">
                        <i data-lucide="compass" style="width: 16px; height: 16px;"></i><span>Explore</span>
                    </a>
                </div>

                <!-- Right Profile Dropdown -->
                <div class="d-flex align-items-center gap-3">
                    <!-- <a href="#" class="text-muted position-relative">
                        <i data-lucide="bell" style="width: 20px; height: 20px;"></i>
                    </a> -->
                    {% include 'shared/partials/_user_menu.html' %}
                </div>
            </div>

            <!-- Main Content -->
            <div class="content-area p-4">
                {% block content %}{% endblock content %}
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="{% static 'shared/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'shared/js/lucide.min.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    <script>
        lucide.createIcons();
    </script>
    <script src="{% static 'shared/js/base.js' %}"></script>
    {% block scripts %}{% endblock %}
</body>

</html>